/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */(function(e){function t(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=0,o=0,t=e.event.fix(n);t.type="mousewheel";n.wheelDelta&&(i=n.wheelDelta/120);n.detail&&(i=-n.detail/3);o=i;n.axis!==void 0&&n.axis===n.HORIZONTAL_AXIS&&(o=0,s=-1*i);n.wheelDeltaY!==void 0&&(o=n.wheelDeltaY/120);n.wheelDeltaX!==void 0&&(s=-1*n.wheelDeltaX/120);r.unshift(t,i,s,o);return(e.event.dispatch||e.event.handle).apply(this,r)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var r=n.length;r;)e.event.fixHooks[n[--r]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery);(function(e,t,n){var r=n(e),i=n(t),s=n.fancybox=function(){s.open.apply(this,arguments)},o=!1,u="undefined"!=typeof t.createTouch;n.extend(s,{version:"2.0.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoResize:!u,autoCenter:!u,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!(n.browser.msie&&6>=n.browser.version)&&!u,scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"'+(n.browser.msie?' allowtransparency="true"':"")+"></iframe>",swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-nav fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}}},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){s.close(!0);e&&!n.isArray(e)&&(e=e instanceof n?n(e).get():[e]);s.isActive=!0;s.opts=n.extend(!0,{},s.defaults,t);n.isPlainObject(t)&&"undefined"!=typeof t.keys&&(s.opts.keys=t.keys?n.extend({},s.defaults.keys,t.keys):!1);s.group=e;s._start(s.opts.index||0)},cancel:function(){s.coming&&!1===s.trigger("onCancel")||(s.coming=null,s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onabort=s.imgPreload.onerror=null))},close:function(e){s.cancel();s.current&&!1!==s.trigger("beforeClose")&&(s.unbindEvents(),!s.isOpen||e&&!0===e[0]?(n(".fancybox-wrap").stop().trigger("onReset").remove(),s._afterZoomOut()):(s.isOpen=s.isOpened=!1,n(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(s.player.timer)},r=function(){t();s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},i=function(){t();n("body").unbind(".player");s.player.isActive=!1;s.trigger("onPlayEnd")};s.player.isActive||e&&!1===e[0]?i():s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":r,"onCancel.player beforeClose.player":i,"beforeLoad.player":t}),r(),s.trigger("onPlayStart"))},next:function(){s.current&&s.jumpto(s.current.index+1)},prev:function(){s.current&&s.jumpto(s.current.index-1)},jumpto:function(e){s.current&&(e=parseInt(e,10),1<s.group.length&&s.current.loop&&(e>=s.group.length?e=0:0>e&&(e=s.group.length-1)),"undefined"!=typeof s.group[e]&&(s.cancel(),s._start(e)))},reposition:function(e){s.isOpen&&s.wrap.css(s._getPosition(e))},update:function(e){s.isOpen&&(o||setTimeout(function(){var t=s.current;if(o&&(o=!1,t)){if(t.autoResize||e&&"orientationchange"===e.type)t.autoSize&&(s.inner.height("auto"),t.height=s.inner.height()),s._setDimension(),t.canGrow&&s.inner.height("auto");t.autoCenter&&s.reposition();s.trigger("onUpdate")}},100),o=!0)},toggle:function(){s.isOpen&&(s.current.fitToView=!s.current.fitToView,s.update())},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){s.hideLoading();n('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body")},getViewport:function(){return{x:r.scrollLeft(),y:r.scrollTop(),w:r.width(),h:r.height()}},unbindEvents:function(){s.wrap&&s.wrap.unbind(".fb");i.unbind(".fb");r.unbind(".fb")},bindEvents:function(){var e=s.current,t=e.keys;e&&(r.bind("resize.fb, orientationchange.fb",s.update),t&&i.bind("keydown.fb",function(e){var r;!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&0>n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])&&(r=e.keyCode,-1<n.inArray(r,t.close)?(s.close(),e.preventDefault()):-1<n.inArray(r,t.next)?(s.next(),e.preventDefault()):-1<n.inArray(r,t.prev)&&(s.prev(),e.preventDefault()))}),n.fn.mousewheel&&e.mouseWheel&&1<s.group.length&&s.wrap.bind("mousewheel.fb",function(e,t){var r=n(e.target).get(0);if(0===r.clientHeight||r.scrollHeight===r.clientHeight&&r.scrollWidth===r.clientWidth)e.preventDefault(),s[0<t?"prev":"next"]()}))},trigger:function(e){var t,r=s[-1<n.inArray(e,["onCancel","beforeLoad","afterLoad"])?"coming":"current"];if(r){n.isFunction(r[e])&&(t=r[e].apply(r,Array.prototype.slice.call(arguments,1)));if(!1===t)return!1;r.helpers&&n.each(r.helpers,function(t,i){i&&"undefined"!=typeof s.helpers[t]&&n.isFunction(s.helpers[t][e])&&s.helpers[t][e](i,r)});n.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t={},r=s.group[e]||null,i,o,u;r&&(r.nodeType||r instanceof n)&&(i=!0,n.metadata&&(t=n(r).metadata()));t=n.extend(!0,{},s.opts,{index:e,element:r},n.isPlainObject(r)?r:t);n.each(["href","title","content","type"],function(e,o){t[o]=s.opts[o]||i&&n(r).attr(o)||t[o]||null});"number"==typeof t.margin&&(t.margin=[t.margin,t.margin,t.margin,t.margin]);t.modal&&n.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}});s.coming=t;if(!1===s.trigger("beforeLoad"))s.coming=null;else{o=t.type;e=t.href||r;o||(i&&(u=n(r).data("fancybox-type"),!u&&r.className&&(o=(u=r.className.match(/fancybox\.(\w+)/))?u[1]:null)),!o&&"string"===n.type(e)&&(s.isImage(e)?o="image":s.isSWF(e)?o="swf":e.match(/^#/)&&(o="inline")),o||(o=i?"inline":"html"),t.type=o);if("inline"===o||"html"===o){if(t.content||(t.content="inline"===o?n("string"===n.type(e)?e.replace(/.*(?=#[^\s]+$)/,""):e):r),!t.content||!t.content.length)o=null}else e||(o=null);t.group=s.group;t.isDom=i;t.href=e;"image"===o?s._loadImage():"ajax"===o?s._loadAjax():o?s._afterLoad():s._error("type")}},_error:function(e){s.hideLoading();n.extend(s.coming,{type:"html",autoSize:!0,minHeight:0,hasError:e,content:s.coming.tpl.error});s._afterLoad()},_loadImage:function(){s.imgPreload=new Image;s.imgPreload.onload=function(){this.onload=this.onerror=null;s.coming.width=this.width;s.coming.height=this.height;s._afterLoad()};s.imgPreload.onerror=function(){this.onload=this.onerror=null;s._error("image")};s.imgPreload.src=s.coming.href;s.imgPreload.width||s.showLoading()},_loadAjax:function(){s.showLoading();s.ajaxLoad=n.ajax(n.extend({},s.coming.ajax,{url:s.coming.href,error:function(e,t){"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(e,t){"success"===t&&(s.coming.content=e,s._afterLoad())}}))},_preloadImages:function(){var e=s.group,t=s.current,r=e.length,i;if(t.preload&&!(2>e.length))for(var o=1;o<=Math.min(t.preload,r-1);o++)if(i=e[(t.index+o)%r],i=n(i).attr("href")||i)(new Image).src=i},_afterLoad:function(){s.hideLoading();!s.coming||!1===s.trigger("afterLoad",s.current)?s.coming=!1:(s.isOpened?(n(".fancybox-item").remove(),s.wrap.stop(!0).removeClass("fancybox-opened"),s.inner.css("overflow","hidden"),s.transitions[s.current.prevMethod]()):(n(".fancybox-wrap").stop().trigger("onReset").remove(),s.trigger("afterClose")),s.unbindEvents(),s.isOpen=!1,s.current=s.coming,s.wrap=n(s.current.tpl.wrap).addClass("fancybox-"+(u?"mobile":"desktop")+" fancybox-tmp "+s.current.wrapCSS).appendTo("body"),s.outer=n(".fancybox-outer",s.wrap).css("padding",s.current.padding+"px"),s.inner=n(".fancybox-inner",s.wrap),s._setContent())},_setContent:function(){var e,t,r=s.current,i=r.type;switch(i){case"inline":case"ajax":case"html":e=r.content;e instanceof n&&(e=e.show().detach(),e.parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),n(s.wrap).bind("onReset",function(){e.appendTo("body").hide()}));r.autoSize&&(t=n('<div class="fancybox-tmp '+s.current.wrapCSS+'"></div>').appendTo("body").append(e),r.width=t.width(),r.height=t.height(),t.width(s.current.width),t.height()>r.height&&(t.width(r.width+1),r.width=t.width(),r.height=t.height()),e=t.contents().detach(),t.remove());break;case"image":e=r.tpl.image.replace("{href}",r.href);r.aspectRatio=!0;break;case"swf":e=r.tpl.swf.replace(/\{width\}/g,r.width).replace(/\{height\}/g,r.height).replace(/\{href\}/g,r.href)}if("iframe"===i){e=n(r.tpl.iframe.replace("{rnd}",(new Date).getTime())).attr("scrolling",r.scrolling);r.scrolling="auto";if(r.autoSize){e.width(r.width);s.showLoading();e.data("ready",!1).appendTo(s.inner).bind({onCancel:function(){n(this).unbind();s._afterZoomOut()},load:function(){var e=n(this),t;try{this.contentWindow.document.location&&(t=e.contents().find("body").height()+12,e.height(t))}catch(i){r.autoSize=!1}!1===e.data("ready")?(s.hideLoading(),t&&(s.current.height=t),s._beforeShow(),e.data("ready",!0)):t&&s.update()}}).attr("src",r.href);return}e.attr("src",r.href)}else if("image"===i||"swf"===i)r.autoSize=!1,r.scrolling="visible";s.inner.append(e);s._beforeShow()},_beforeShow:function(){s.coming=null;s.trigger("beforeShow");s._setDimension();s.wrap.hide().removeClass("fancybox-tmp");s.bindEvents();s._preloadImages();s.transitions[s.isOpened?s.current.nextMethod:s.current.openMethod]()},_setDimension:function(){var e=s.wrap,t=s.outer,r=s.inner,i=s.current,o=s.getViewport(),u=i.margin,f=2*i.padding,l=i.width,c=i.height,h=i.maxWidth,p=i.maxHeight,d=i.minWidth,v=i.minHeight,m;o.w-=u[1]+u[3];o.h-=u[0]+u[2];-1<l.toString().indexOf("%")&&(l=(o.w-f)*parseFloat(l)/100);-1<c.toString().indexOf("%")&&(c=(o.h-f)*parseFloat(c)/100);u=l/c;l+=f;c+=f;i.fitToView&&(h=Math.min(o.w,h),p=Math.min(o.h,p));i.aspectRatio?(l>h&&(l=h,c=(l-f)/u+f),c>p&&(c=p,l=(c-f)*u+f),l<d&&(l=d,c=(l-f)/u+f),c<v&&(c=v,l=(c-f)*u+f)):(l=Math.max(d,Math.min(l,h)),c=Math.max(v,Math.min(c,p)));l=Math.round(l);c=Math.round(c);n(e.add(t).add(r)).width("auto").height("auto");r.width(l-f).height(c-f);e.width(l);m=e.height();if(l>h||m>p)for(;(l>h||m>p)&&l>d&&m>v;)c-=10,i.aspectRatio?(l=Math.round((c-f)*u+f),l<d&&(l=d,c=(l-f)/u+f)):l-=10,r.width(l-f).height(c-f),e.width(l),m=e.height();i.dim={width:l,height:m};i.canGrow=i.autoSize&&c>v&&c<p;i.canShrink=!1;i.canExpand=!1;l-f<i.width||c-f<i.height?i.canExpand=!0:(l>o.w||m>o.h)&&l>d&&c>v&&(i.canShrink=!0);e=m-f;s.innerSpace=e-r.height();s.outerSpace=e-t.height()},_getPosition:function(e){var t=s.current,n=s.getViewport(),r=t.margin,i=s.wrap.width()+r[1]+r[3],o=s.wrap.height()+r[0]+r[2],u={position:"absolute",top:r[0]+n.y,left:r[3]+n.x};t.fixed&&(!e||!1===e[0])&&o<=n.h&&i<=n.w&&(u={position:"fixed",top:r[0],left:r[3]});u.top=Math.ceil(Math.max(u.top,u.top+(n.h-o)*t.topRatio))+"px";u.left=Math.ceil(Math.max(u.left,u.left+.5*(n.w-i)))+"px";return u},_afterZoomIn:function(){var e=s.current,t=e.scrolling;s.isOpen=s.isOpened=!0;s.wrap.addClass("fancybox-opened").css("overflow","visible");s.update();s.inner.css("overflow","yes"===t?"scroll":"no"===t?"hidden":t);(e.closeClick||e.nextClick)&&s.inner.css("cursor","pointer").bind("click.fb",e.nextClick?s.next:s.close);e.closeBtn&&n(e.tpl.closeBtn).appendTo(s.outer).bind("click.fb",s.close);e.arrows&&1<s.group.length&&((e.loop||0<e.index)&&n(e.tpl.prev).appendTo(s.inner).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&n(e.tpl.next).appendTo(s.inner).bind("click.fb",s.next));s.trigger("afterShow");s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play())},_afterZoomOut:function(){s.trigger("afterClose");s.wrap.trigger("onReset").remove();n.extend(s,{group:{},opts:{},current:null,isActive:!1,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}});s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,r=e.padding,i=n(e.orig),o={},u=50,f=50;!i.length&&e.isDom&&n(t).is(":visible")&&(i=n(t).find("img:first"),i.length||(i=n(t)));i.length?(o=i.offset(),i.is("img")&&(u=i.outerWidth(),f=i.outerHeight())):(e=s.getViewport(),o.top=e.y+.5*(e.h-f),o.left=e.x+.5*(e.w-u));return o={top:Math.ceil(o.top-r)+"px",left:Math.ceil(o.left-r)+"px",width:Math.ceil(u+2*r)+"px",height:Math.ceil(f+2*r)+"px"}},step:function(e,t){var n,r,i;if("width"===t.prop||"height"===t.prop)r=i=Math.ceil(e-2*s.current.padding),"height"===t.prop&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),r-=s.innerSpace*n,i-=s.outerSpace*n),s.inner[t.prop](r),s.outer[t.prop](i)},zoomIn:function(){var e=s.wrap,t=s.current,r,i;r=t.dim;"elastic"===t.openEffect?(i=n.extend({},r,s._getPosition(!0)),delete i.position,r=this.getOrigPosition(),t.openOpacity&&(r.opacity=0,i.opacity=1),s.outer.add(s.inner).width("auto").height("auto"),e.css(r).show(),e.animate(i,{duration:t.openSpeed,easing:t.openEasing,step:this.step,complete:s._afterZoomIn})):(e.css(n.extend({},r,s._getPosition())),"fade"===t.openEffect?e.fadeIn(t.openSpeed,s._afterZoomIn):(e.show(),s._afterZoomIn()))},zoomOut:function(){var e=s.wrap,t=s.current,n;"elastic"===t.closeEffect?("fixed"===e.css("position")&&e.css(s._getPosition(!0)),n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=0),e.animate(n,{duration:t.closeSpeed,easing:t.closeEasing,step:this.step,complete:s._afterZoomOut})):e.fadeOut("fade"===t.closeEffect?t.closeSpeed:0,s._afterZoomOut)},changeIn:function(){var e=s.wrap,t=s.current,n;"elastic"===t.nextEffect?(n=s._getPosition(!0),n.opacity=0,n.top=parseInt(n.top,10)-200+"px",e.css(n).show().animate({opacity:1,top:"+=200px"},{duration:t.nextSpeed,easing:t.nextEasing,complete:s._afterZoomIn})):(e.css(s._getPosition()),"fade"===t.nextEffect?e.hide().fadeIn(t.nextSpeed,s._afterZoomIn):(e.show(),s._afterZoomIn()))},changeOut:function(){var e=s.wrap,t=s.current,r=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened");"elastic"===t.prevEffect?e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,easing:t.prevEasing,complete:r}):e.fadeOut("fade"===t.prevEffect?t.prevSpeed:0,r)}};s.helpers.overlay={overlay:null,update:function(){var e,s;this.overlay.width(0).height(0);n.browser.msie?(e=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth),s=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e=e<s?r.width():e):e=i.width();this.overlay.width(e).height(i.height())},beforeShow:function(e){this.overlay||(e=n.extend(!0,{speedIn:"fast",closeClick:!0,opacity:1,css:{background:"black"}},e),this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",s.close),r.bind("resize.fb",n.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn,e.opacity))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||0,function(){n(this).remove()});this.overlay=null}};s.helpers.title={beforeShow:function(e){var t;if(t=s.current.title)t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+t+"</div>").appendTo("body"),"float"===e.type&&(t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?s.inner:"outside"===e.type?s.wrap:s.outer)}};n.fn.fancybox=function(e){var t=n(this),r=this.selector||"",o,u=function(i){var u=this,f="rel",l=u[f],h=o;!i.ctrlKey&&!i.altKey&&!i.shiftKey&&!i.metaKey&&(i.preventDefault(),l||(f="data-fancybox-group",l=n(u).attr("data-fancybox-group")),l&&""!==l&&"nofollow"!==l&&(u=r.length?n(r):t,u=u.filter("["+f+'="'+l+'"]'),h=u.index(this)),e.index=h,s.open(u,e))},e=e||{};o=e.index||0;r?i.undelegate(r,"click.fb-start").delegate(r,"click.fb-start",u):t.unbind("click.fb-start").bind("click.fb-start",u);return this}})(window,document,jQuery);$(document).ready(function(){$(".lightbox").fancybox();$("label").inFieldLabels();$("#signup input[type='submit']").click(function(e){e.preventDefault();var t=$("#signup input[type='submit']");$("#signup ul").parent().hide();$("#submit").after('<p>Thanks for signing up. Make sure to follow on twitter at <a href="https://twitter.com/winespectator">@WineSpectator</a>.</p>')})});